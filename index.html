<!DOCTYPE html>
<html>
<head>
    <title>PureCrunchEats - Order Online</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        .menu-item { border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 8px; }
        .menu-item img { width: 100%; height: 200px; object-fit: cover; border-radius: 5px; }
        button { background: #e74c3c; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; }
        #cart { background: #f9f9f9; padding: 20px; margin-top: 30px; border-radius: 8px; }
        #payment-form, #collection-form, #delivery-form { display: none; margin-top: 20px; }
        input, textarea { width: 100%; padding: 10px; margin: 8px 0 15px; border: 1px solid #ddd; border-radius: 4px; }
        .form-row { display: flex; gap: 10px; }
        .payment-option { margin: 15px 0; }
        [type="radio"] { width: auto; margin-right: 10px; }
        .promo-banner { width: 100%; border-radius: 8px; margin: 20px 0; }
        h1 { color: #e74c3c; text-align: center; }
        h2 { border-bottom: 2px solid #e74c3c; padding-bottom: 5px; }
        .menu-category { margin-top: 30px; }
        .whatsapp-btn { 
            background: #25D366; color: white; padding: 10px 15px; 
            border-radius: 5px; text-decoration: none; display: inline-block; 
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>PureCrunchEats</h1>
    <img src="promo-banner.jpg" alt="Special Offers" class="promo-banner">

    <!-- All your original menu items -->
    <div class="menu-category">
        <h2>Smoothies</h2>
        <div class="menu-item">
            <img src="smoothie-menu.jpg" alt="Strawberry Bliss">
            <h3>STRAWBERRY BLISS - R32.00</h3>
            <p>Fresh strawberries, banana, Greek yogurt, honey</p>
            <button class="add-to-cart" data-name="STRAWBERRY BLISS" data-price="32">Add to Cart</button>
        </div>
        <!-- Other smoothie items -->
    </div>

    <div class="menu-category">
        <h2>Chicken & Fries</h2>
        <div class="menu-item">
            <img src="wing-fries.jpg" alt="Crispy Wing">
            <h3>1 CRISPY WING - R8.00</h3>
            <p>Juicy chicken wing with secret spices</p>
            <button class="add-to-cart" data-name="1 CRISPY WING" data-price="8">Add to Cart</button>
        </div>
        <!-- Other chicken items -->
    </div>

    <div id="cart">
        <h2>Your Order</h2>
        <div id="cart-items">Cart is empty</div>
        <div id="cart-total">Total: R0.00</div>
        <button id="checkout-btn">Checkout</button>
    </div>

    <!-- Payment Options -->
    <div id="payment-options" style="display:none;">
        <h2>Payment Method</h2>
        <div class="payment-option">
            <input type="radio" name="payment" id="pay-card" checked>
            <label for="pay-card">Pay Now with Card</label>
        </div>
        <div class="payment-option">
            <input type="radio" name="payment" id="pay-collection">
            <label for="pay-collection">Pay Cash When Collecting</label>
        </div>
        <div class="payment-option">
            <input type="radio" name="payment" id="pay-delivery">
            <label for="pay-delivery">Pay Cash on Delivery (+R3 fee)</label>
        </div>
        <button id="confirm-payment-method">Continue</button>
    </div>

    <!-- Card Payment Form -->
    <div id="payment-form">
        <h2>Card Payment</h2>
        <input type="text" id="card-number" placeholder="Card Number (16 digits)" maxlength="16" required>
        <div class="form-row">
            <input type="text" id="expiry" placeholder="MM/YY" maxlength="5" required>
            <input type="text" id="cvv" placeholder="CVV" maxlength="3" required>
        </div>
        <button id="pay-now">Pay Now</button>
    </div>

    <!-- Collection Form -->
    <div id="collection-form">
        <h2>Collection Details</h2>
        <input type="text" id="collection-name" placeholder="Your Name" required>
        <input type="tel" id="collection-phone" placeholder="Phone Number" required>
        <button id="confirm-collection">Place Order</button>
    </div>

    <!-- Delivery Form -->
    <div id="delivery-form">
        <h2>Delivery Details</h2>
        <input type="text" id="delivery-name" placeholder="Your Name" required>
        <input type="tel" id="delivery-phone" placeholder="Phone Number" required>
        <textarea id="delivery-address" placeholder="Full Delivery Address" required></textarea>
        <button id="confirm-delivery">Place Order</button>
    </div>

    <!-- Success Message -->
    <div id="success" style="display:none;">
        <h2>Order Confirmed! ✅</h2>
        <p id="success-message"></p>
        <div id="whatsapp-notification"></div>
    </div>

    <script>
        const cart = [];
        const DELIVERY_FEE = 3;
        const OWNER_PHONE = '0731575601'; // Your WhatsApp number
        
        // Cart functions
        function updateCart() {
            const cartItemsEl = document.getElementById('cart-items');
            const cartTotalEl = document.getElementById('cart-total');
            
            if (cart.length === 0) {
                cartItemsEl.innerHTML = '<p>Cart is empty</p>';
                cartTotalEl.textContent = 'Total: R0.00';
                return;
            }
            
            let html = '';
            let subtotal = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                html += `
                    <div style="margin: 10px 0; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            ${item.name} 
                            <button onclick="updateQuantity(${index}, -1)" style="padding: 2px 8px;">-</button>
                            ${item.quantity}
                            <button onclick="updateQuantity(${index}, 1)" style="padding: 2px 8px;">+</button>
                        </div>
                        <div>R${itemTotal.toFixed(2)}</div>
                    </div>
                `;
            });
            
            cartItemsEl.innerHTML = html;
            cartTotalEl.textContent = `Total: R${subtotal.toFixed(2)}`;
        }
        
        function updateQuantity(index, change) {
            cart[index].quantity += change;
            if (cart[index].quantity < 1) cart.splice(index, 1);
            updateCart();
        }

        // Add to cart
        document.querySelectorAll('.add-to-cart').forEach(btn => {
            btn.addEventListener('click', () => {
                const name = btn.dataset.name;
                const price = parseFloat(btn.dataset.price);
                
                const existingItem = cart.find(item => item.name === name);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ name, price, quantity: 1 });
                }
                
                updateCart();
            });
        });
        
        // Checkout
        document.getElementById('checkout-btn').addEventListener('click', () => {
            if (cart.length === 0) return alert("Your cart is empty");
            document.getElementById('payment-options').style.display = 'block';
        });
        
        // Payment method selection
        document.getElementById('confirm-payment-method').addEventListener('click', () => {
            const paymentMethod = document.querySelector('input[name="payment"]:checked').id;
            
            document.getElementById('payment-options').style.display = 'none';
            
            if (paymentMethod === 'pay-card') {
                document.getElementById('payment-form').style.display = 'block';
            } 
            else if (paymentMethod === 'pay-collection') {
                document.getElementById('collection-form').style.display = 'block';
            }
            else if (paymentMethod === 'pay-delivery') {
                document.getElementById('delivery-form').style.display = 'block';
            }
        });
        
        // Process payments
        document.getElementById('pay-now').addEventListener('click', processCardPayment);
        document.getElementById('confirm-collection').addEventListener('click', processCollection);
        document.getElementById('confirm-delivery').addEventListener('click', processDelivery);
        
        function processCardPayment() {
            const cardNumber = document.getElementById('card-number').value;
            const expiry = document.getElementById('expiry').value;
            const cvv = document.getElementById('cvv').value;
            
            if (!validateCard(cardNumber, expiry, cvv)) return;
            
            const total = calculateTotal(false);
            completeOrder(total, "Card Payment", false);
        }
        
        function processCollection() {
            const name = document.getElementById('collection-name').value;
            const phone = document.getElementById('collection-phone').value;
            
            if (!name || !phone) return alert("Please fill collection details");
            
            const total = calculateTotal(false);
            completeOrder(total, "Cash on Collection", false, name, phone);
        }
        
        function processDelivery() {
            const name = document.getElementById('delivery-name').value;
            const phone = document.getElementById('delivery-phone').value;
            const address = document.getElementById('delivery-address').value;
            
            if (!name || !phone || !address) return alert("Please fill delivery details");
            
            const total = calculateTotal(true);
            completeOrder(total, "Cash on Delivery (+R3)", true, name, phone, address);
        }
        
        function calculateTotal(includeDelivery) {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            return subtotal + (includeDelivery ? DELIVERY_FEE : 0);
        }
        
        function validateCard(cardNumber, expiry, cvv) {
            if (cardNumber.length !== 16) {
                alert("Card number must be 16 digits");
                return false;
            }
            if (!/^\d{2}\/\d{2}$/.test(expiry)) {
                alert("Enter expiry as MM/YY");
                return false;
            }
            if (cvv.length !== 3) {
                alert("CVV must be 3 digits");
                return false;
            }
            return true;
        }
        
        function completeOrder(total, paymentMethod, isDelivery = false, name = '', phone = '', address = '') {
            // Create WhatsApp message
            let whatsappMsg = `*NEW ORDER* 🍽️\n\n`;
            whatsappMsg += `*Total:* R${total.toFixed(2)}\n`;
            whatsappMsg += `*Payment:* ${paymentMethod}\n\n`;
            whatsappMsg += `*Items:*\n`;
            
            cart.forEach(item => {
                whatsappMsg += `- ${item.name} x${item.quantity} - R${(item.price * item.quantity).toFixed(2)}\n`;
            });
            
            if (isDelivery) {
                whatsappMsg += `\n*Delivery Address:*\n${name}\n${phone}\n${address}\n`;
            } else if (name) {
                whatsappMsg += `\n*Collection By:*\n${name}\n${phone}\n`;
            }
            
            // Create WhatsApp link
            const whatsappUrl = `https://wa.me/${OWNER_PHONE}?text=${encodeURIComponent(whatsappMsg)}`;
            
            // Show success
            document.getElementById('payment-form').style.display = 'none';
            document.getElementById('collection-form').style.display = 'none';
            document.getElementById('delivery-form').style.display = 'none';
            document.getElementById('success').style.display = 'block';
            
            document.getElementById('success-message').innerHTML = `
                <p>Payment: <strong>${paymentMethod}</strong></p>
                <p>Total: <strong>R${total.toFixed(2)}</strong></p>
                ${name ? `<p>Customer: <strong>${name}</strong></p>` : ''}
                ${phone ? `<p>Phone: <strong>${phone}</strong></p>` : ''}
                ${address ? `<p>Address: <strong>${address}</strong></p>` : ''}
            `;
            
            document.getElementById('whatsapp-notification').innerHTML = `
                <a href="${whatsappUrl}" class="whatsapp-btn" target="_blank">
                    View Order on WhatsApp
                </a>
                <p><small>Notification will be sent to ${OWNER_PHONE}</small></p>
            `;
            
            // Clear cart
            cart.length = 0;
            updateCart();
        }
    </script>
</body>
</html>
